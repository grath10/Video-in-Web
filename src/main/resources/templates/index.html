<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>视频流查看</title>
    <style type="text/css">
        html, body {
            background-color: #111;
            text-align: center;
        }
    </style>
    <link rel="stylesheet" href="/static/admin-lte/bootstrap/css/bootstrap.min.css" th:href="@{/static/admin-lte/bootstrap/css/bootstrap.min.css}"/>
</head>
<body>
    <canvas id="video-canvas" style="width: 640px; height: 480px;border: 1px solid #e2e2e2;"></canvas>
    <div class="row" style="margin-left: 15px;">
        <button class="btn btn-default" onclick="getStream()">查看</button>
        <button class="btn btn-default" onclick="stopStream()">停止</button>
    </div>
</body>
<script src="/static/admin-lte/plugins/jQuery/jquery-2.2.3.min.js" th:href="@{/static/admin-lte/plugins/jQuery/jquery-2.2.3.min.js}"></script>
<script type="text/javascript" src="/static/js/jsmpeg.min.js" th:src="@{/static/js/jsmpeg.min.js}"></script>
<script type="text/javascript">
    var player = new JSMpeg.Player('ws://' + location.hostname + ':8082', {
        canvas: document.getElementById('video-canvas')
    });

    function getStream() {
        $.ajax({
            url: '/stream/start',
            data: {
                "cid": 'F1960001'
            },
            type: 'GET',
            success: function () {

            }
        })
    }

    function stopStream() {
        $.ajax({
            url: '/stream/stop',
            data: {
                "cid": 'F1960001'
            },
            type: 'GET',
            success: function () {

            }
        })
    }
</script>
</html>
